<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>eesyscreener • eesyscreener</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="eesyscreener">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eesyscreener</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/eesyscreener.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/assumptions_in_checks.html">Assumptions in checks</a></li>
    <li><a class="dropdown-item" href="../articles/common_file_failures.html">Common file failures</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dfe-analytical-services/eesyscreener/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>eesyscreener</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dfe-analytical-services/eesyscreener/blob/main/vignettes/eesyscreener.Rmd" class="external-link"><code>vignettes/eesyscreener.Rmd</code></a></small>
      <div class="d-none name"><code>eesyscreener.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="an-overview">An overview<a class="anchor" aria-label="anchor" href="#an-overview"></a>
</h2>
<p><a href="https://explore-education-statistics.service.gov.uk/" class="external-link">Explore
education statistics (EES)</a> is our bespoke statistics publishing
platform, for it to work we rely on standardising the structure of our
data files.</p>
<p>This package contains the checks used to enforce our <a href="https://dfe-analytical-services.github.io/analysts-guide/statistics-production/ud.html" class="external-link">open
data standards</a>.</p>
<p>The package contains:</p>
<ul>
<li>A core <code><a href="../reference/screen_csv.html">screen_csv()</a></code> function, built from
<code><a href="../reference/screen_dfs.html">screen_dfs()</a></code>, and <code><a href="../reference/screen_filenames.html">screen_filenames()</a></code> and the
constituent individual checks, as well as a related wrapper function
<code>screen_zip()</code>
</li>
<li>Functions to generate test data</li>
<li>Example datasets to aid testing and demonstration</li>
<li>Additional functions to aid in screening / preparing data for
EES</li>
</ul>
<p>If you’ve come here because your data is failing the screening and
you want help in figuring out why, start off with our
<code>Common file failures</code> article.</p>
<div class="section level3">
<h3 id="screen_csv">
<code>screen_csv()</code><a class="anchor" aria-label="anchor" href="#screen_csv"></a>
</h3>
<p><code><a href="../reference/screen_csv.html">screen_csv()</a></code> core function that reads the CSV files, and
then runs all checks from <code><a href="../reference/screen_filenames.html">screen_filenames()</a></code> and
<code><a href="../reference/screen_dfs.html">screen_dfs()</a></code>, providing full screening for a given pair of
CSV files.</p>
<p>This function is the key function that will be used in both the
plumber API and the R Shiny app.</p>
<ul>
<li>Returns one of the following outputs:
<ul>
<li>Structured list, including data.frame of results / feedback</li>
<li>Console messages</li>
<li>Errors only - intended to be used within pipelines as a QA function.
If all passes nothing is returned (maybe an invisible TRUE?)</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="screen_zip">
<code>screen_zip()</code><a class="anchor" aria-label="anchor" href="#screen_zip"></a>
</h3>
<p>Future expansion to screen ZIP files, batching multiple file pairs as
a wrapper around <code><a href="../reference/screen_csv.html">screen_csv()</a></code>.</p>
<p>Probably not required in the plumber API, but will be helpful for the
R Shiny app and users more generally for batching of files.</p>
<p><code>check_zip()</code> does the validation that the ZIP folder
structure is appropriate prior to batching the file pairs through
<code><a href="../reference/screen_csv.html">screen_csv()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="screen_filenames">
<code>screen_filenames()</code><a class="anchor" aria-label="anchor" href="#screen_filenames"></a>
</h3>
<p>Runs all of the filename screening checks in one go. Exported so it
can be used in it’s own right to check file name pairings. Used within
<code><a href="../reference/screen_csv.html">screen_csv()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="screen_dfs">
<code>screen_dfs()</code><a class="anchor" aria-label="anchor" href="#screen_dfs"></a>
</h3>
<p>Runs all of the checks against the data and metadata data.frames,
once read in from the CSV files. Used within
<code><a href="../reference/screen_csv.html">screen_csv()</a></code>.</p>
<p>The ordering is important as later tests carry assumptions that
earlier tests have passed. This is to prevent duplication / unnecessary
processing of data, as well as simplifying the logic in the later tests.
This does introduce some overall complexity, particularly for package
maintainers and any users wanting to use individual tests, and therefore
there is a vignette that walks through this ordering in greater detail -
….</p>
<p>There are a number of stages, which are mirrored in the documentation
for the individual functions, the <code>_pkgdown.yml</code> file shows
this, in the order the tests are ran, including the naming
conventions.</p>
<ul>
<li>Stages are grouped by area of the data they relate to</li>
<li>Pre-checks are run first as the main checks for each area depend on
them passing</li>
<li>TODO: We should do in a way that can be parallelised, so users can
speed up the screening for larger files if their machine allows
(particularly helpful for the API and Shiny app)</li>
</ul>
<p>Each individual precheck / check: - Returns a single row data.frame
of results, with optional console output and error triggers</p>
<p>Standard pattern:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">test_output</span>(</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="st">"test_name"</span>, <span class="co"># name of check</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="st">"PASS"</span>, <span class="co"># result of check, one of 'PASS', 'FAIL', 'WARNING'</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"'"</span>, filename, <span class="st">"' does not contain any special characters."</span>), <span class="co"># feedback message for user, avoid HTML, keep to a simple string</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="st">"https://dfe-analytical-services.github.io/analysts-guide/"</span>, <span class="co"># optional URL for guidance, can just not include as will default to NA</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">FALSE</span> <span class="co"># whether to print messages to console</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  <span class="at">stop_on_error =</span> <span class="cn">FALSE</span> <span class="co"># whether to stop execution and throw error if FAIL, and throw warning if </span><span class="al">WARNING</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cam Race.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
